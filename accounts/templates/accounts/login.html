{% extends 'accounts/authentication.html' %}

{% load custom_filters %}

{% block title %}Login Page{% endblock %}

{% block content %}

<form action="" method="post">

    <h3>Login Page</h3>
    
    {% csrf_token %}
    
    <label for="username">{{ form.username.label }}</label>
    {{ form.username }}

    <label for="password">{{ form.password.label }}</label>
    {{ form.password }}

    <input type="submit" value="Login" class="custom-button">

    {% if form.errors %}
    <div class="form-errors">
        <ul>
            {% for field, errors in form.errors.items %}
            {% with field_labels=field|get_field_label %}
            <li>{{ field_labels|default:field|capfirst }}: {{ errors|join:", " }}</li>
            {% endwith %}
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% comment %} Simple Message {% endcomment %}
    {% comment %} {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert {{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %} {% endcomment %}

    {% comment %} Message in Alert Box {% endcomment %}
    {% comment %} {% if messages %}
    <script>
        {% for message in messages %}
            {% if message.tags == 'success' %}
                alert("{{ message|escapejs }}");
            {% endif %}
        {% endfor %}
    </script>
    {% endif %}     {% endcomment %}

    {% comment %} Message in Styled Alert Box {% endcomment %}
    <script>
        {% for message in messages %}
            {% if message.tags == 'success' %}
                Swal.fire({
                    title: 'Success!',
                    text: "{{ message|escapejs }}",
                    icon: 'success',
                    confirmButtonText: 'OK'
                });
            {% endif %}
        {% endfor %}
    </script>    

    <div class="form-footer">
        <p>Don't have an account?<span><a href="{% url 'register' %}">Register</a></span></p>
    </div>
</form>

{% endblock %}
